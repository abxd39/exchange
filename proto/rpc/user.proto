syntax = "proto3";
package g2u;

service Gateway2User {
	rpc Hello(HelloRequest) returns (HelloResponse) {}
	rpc Register(RegisterRequest) returns (RegisterResponse) {}
	rpc Login(LoginRequest) returns (LoginResponse) {}
	rpc ForgetPwd(ForgetRequest) returns (ForgetResponse) {}
	rpc AuthSecurity(SecurityRequest) returns (SecurityResponse) {}
	rpc ChangePwd(ChangePwdRequest) returns (CommonErrResponse) {}
	rpc SendSms(SmsRequest) returns (CommonErrResponse) {}
    rpc SendEmail(EmailRequest) returns (CommonErrResponse) {}
}

message CommonErrResponse{
    int32 err       =1;
    string message  =2;
}

message HelloRequest {
	string name = 1;
}

message HelloResponse {
	string greeting = 2;
}

message RegisterRequest {
    string phone=1;
    string pwd=2;
    string invite_code=4;
    int32  country=5;
}

message RegisterResponse {
	int32 err = 1;
}

message LoginRequest {
    string phone =1;
    string pwd=2;
}

message LoginResponse {
	int32 err = 1;
}

message ForgetRequest {
    string phone    =1;
}

message ForgetResponse {
    int32 err       =1;
    string message  =2;
    string phone    =3;
    string email    =4;
}

message SecurityRequest {
    string phone            =1;
    string phone_auth_code  =2;
    string email_auth_code  =3;
}

message SecurityResponse{
    int32 err               =1;
    string message          =2;
    bytes security_key     =3;
}

message SmsRequest {
    string phone            =1;
}

message EmailRequest{
    string email            =1;
}

message ChangePwdRequest {
    bytes security_key            =1;
    string phone                    =2;
}